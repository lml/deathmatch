!function e(t,o,n){function r(i,c){if(!o[i]){if(!t[i]){var a="function"==typeof require&&require;if(!c&&a)return a(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var p=o[i]={exports:{}};t[i][0].call(p.exports,function(e){var o=t[i][1][e];return r(o?o:e)},p,p.exports,e,t,o,n)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t){var o,n,r={}.hasOwnProperty,s=function(e,t){function o(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};n=e("./../../../../../bower_components/backbone/backbone.js"),n.$=e("./../../../../../bower_components/jquery/dist/jquery.js"),e("./../../../../../bower_components/backbone-associations/backbone-associations.js"),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.owner=function(){return null!=this.parents&&null!=this.parents[0]?this.parents[0]:void 0},t.prototype.resourceName=function(){return this.constructor.name.toLowerCase()},t.prototype.url=function(){var e;return e=this.owner(),e?""+e.url()+"/"+this.resourceName():void 0},t}(n.Collection),t.exports=o},{"./../../../../../bower_components/backbone-associations/backbone-associations.js":"isMywK","./../../../../../bower_components/backbone/backbone.js":"KDJVm1","./../../../../../bower_components/jquery/dist/jquery.js":"d6Ad4U"}],2:[function(e,t){var o,n,r,s={}.hasOwnProperty,i=function(e,t){function o(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};o=e("./../../../../../bower_components/backbone/backbone.js"),o.$=e("./../../../../../bower_components/jquery/dist/jquery.js"),e("./../../../../../bower_components/backbone-associations/backbone-associations.js"),r=e("./../../../../../bower_components/underscore/underscore.js"),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.resourceName=function(){return"choice"},t.prototype.question=function(){return this.collection.owner()},t.prototype.position=function(){return this.get("position")},t.prototype.letter=function(){return String.fromCharCode(97+this.position())},t.prototype.canMoveUp=function(){return"simple"===this.type()&&this.position()>0},t.prototype.canMoveDown=function(){var e,t;return e=function(e){return function(){return e.position()===e.collection.length-1}}(this),t=function(e){return function(){return"simple"!==e.collection.at(e.position()+1).type()}}(this),"simple"===this.type()&&!(e()||t())},t.prototype.type=function(){return this.get("type")},t.prototype.weight=function(){switch(this.type()){case"simple":return-100+this.position();case"all":return 500;case"none":return 1e4;default:return this.get("combos").length}},t.prototype.compare=function(e){var t,o,n,s,i,c,a;return t=-1,s=1,c=0,i=function(e,o){switch(!1){case e!==o:return c;case!(o>e):return t;default:return s}},n=i(this.weight(),e.weight()),n===c&&this.type()===(a=e.type())&&"combo"===a&&(o=r.find(r.zip(this.combos(),e.combos()),function(e){var t,o;return t=e[0],o=e[1],t.compare(o)!==c}),n=o?o[0].compare(o[1]):c),n},t.prototype.setSelections=function(e){return"combo"===this.type()?this.set({combos:e}):void 0},t.prototype.selections=function(){var e,t,o,n,s,i,c,a;if("combo"===this.type()){for(n=this.collection.filter(function(){return function(e){return"simple"===e.type()}}(this)),e=this.get("combos"),t=function(t){return r.contains(e,t.get("id"))},s={},a=[],i=0,c=n.length;c>i;i++)o=n[i],a.push([o,t(o)]);return a}},t.prototype.combos=function(){var e;return"combo"===this.type()?(e=this.get("combos").map(function(e){return function(t){return e.collection.get(t)}}(this)),r.sortBy(e,function(e){return e.position()})):void 0},t.prototype.moveUp=function(){var e;return this.canMoveUp()&&(e=this.position()),this.collection.move(e,e-1)},t.prototype.moveDown=function(){var e;return this.canMoveDown()&&(e=this.position()),this.collection.move(e,e+1)},t}(o.AssociatedModel),t.exports=n},{"./../../../../../bower_components/backbone-associations/backbone-associations.js":"isMywK","./../../../../../bower_components/backbone/backbone.js":"KDJVm1","./../../../../../bower_components/jquery/dist/jquery.js":"d6Ad4U","./../../../../../bower_components/underscore/underscore.js":"l0hNr+"}],3:[function(e,t){var o,n,r,s,i,c,a={}.hasOwnProperty,p=function(e,t){function o(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};n=e("./associated_collection.js.coffee"),r=e("./../../../../../bower_components/backbone/backbone.js"),r.$=e("./../../../../../bower_components/jquery/dist/jquery.js"),s=e("./choice.js.coffee"),o=e("./../../../../../bower_components/jquery/dist/jquery.js"),c=e("./../../../../../bower_components/underscore/underscore.js"),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.model=s,t.prototype.positionField="position",t.prototype.resourceName=function(){return"choices"},t.prototype.initialize=function(){return this.listenTo(this,"add remove sort",this.setPositionsFromIndex),this.listenTo(this,"change:combos",function(e){return function(){return e.sort()}}(this))},t.prototype.comparator=function(e,t){return e.compare(t)},t.prototype.savePositions=function(e){return null==e&&(e={}),0!==this.models.length?(c.defaults(e,{attrs:{order:c.map(this.filter(function(e){return e.hasChanged}),function(e){return{id:e.get("id"),position:e.get(this.positionField)}})}}),this.sync("update",this,e)):void 0},t.prototype.setPositionsFromIndex=function(){return this.each(function(e){return function(t,o){return t.set(e.positionField,o)}}(this))},t.prototype.simples=function(){return this.filter(function(e){return"simple"===e.type()})},t.prototype.move=function(e,t){return e instanceof r.Model&&(e=e.get(this.positionField)),this.models.splice(t,0,this.models.splice(e,1)[0]),this.setPositionsFromIndex(),this.sort(),this.savePositions({error:function(){return function(){return alert("sort order could not be saved, please reload this page")}}(this)})},t}(n),t.exports=i},{"./../../../../../bower_components/backbone/backbone.js":"KDJVm1","./../../../../../bower_components/jquery/dist/jquery.js":"d6Ad4U","./../../../../../bower_components/underscore/underscore.js":"l0hNr+","./associated_collection.js.coffee":1,"./choice.js.coffee":2}],4:[function(e,t){var o,n,r,s,i={}.hasOwnProperty,c=function(e,t){function o(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};o=e("./../../../../../bower_components/backbone/backbone.js"),o.$=e("./../../../../../bower_components/jquery/dist/jquery.js"),e("./../../../../../bower_components/backbone-associations/backbone-associations.js"),r=e("./part.js.coffee"),s=e("./parts.js.coffee"),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.urlRoot="/api/exercises",t.prototype.relations=[{type:o.Many,key:"parts",relatedModel:r,collectionType:s}],t.prototype.defaults={number:""},t}(o.AssociatedModel),t.exports=n},{"./../../../../../bower_components/backbone-associations/backbone-associations.js":"isMywK","./../../../../../bower_components/backbone/backbone.js":"KDJVm1","./../../../../../bower_components/jquery/dist/jquery.js":"d6Ad4U","./part.js.coffee":5,"./parts.js.coffee":6}],5:[function(e,t){var o,n,r,s={}.hasOwnProperty,i=function(e,t){function o(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};o=e("./../../../../../bower_components/backbone/backbone.js"),o.$=e("./../../../../../bower_components/jquery/dist/jquery.js"),e("./../../../../../bower_components/backbone-associations/backbone-associations.js"),r=e("./questions.js.coffee"),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.resourceName=function(){return"part"},t.prototype.defaults={position:-1,credit:-1},t.prototype.relations=[{type:o.Many,key:"questions",collectionType:r}],t}(o.AssociatedModel),t.exports=n},{"./../../../../../bower_components/backbone-associations/backbone-associations.js":"isMywK","./../../../../../bower_components/backbone/backbone.js":"KDJVm1","./../../../../../bower_components/jquery/dist/jquery.js":"d6Ad4U","./questions.js.coffee":8}],6:[function(e,t){var o,n,r,s={}.hasOwnProperty,i=function(e,t){function o(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};o=e("./associated_collection.js.coffee"),n=e("./part.js.coffee"),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.model=n,t.prototype.resourceName=function(){return"parts"},t}(o),t.exports=r},{"./associated_collection.js.coffee":1,"./part.js.coffee":5}],7:[function(e,t){var o,n,r,s,i={}.hasOwnProperty,c=function(e,t){function o(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};o=e("./../../../../../bower_components/backbone/backbone.js"),o.$=e("./../../../../../bower_components/jquery/dist/jquery.js"),e("./../../../../../bower_components/backbone-associations/backbone-associations.js"),n=e("./choices.js.coffee"),s=e("./../../../../../bower_components/underscore/underscore.js"),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.resourceName=function(){return"question"},t.prototype.defaults={type:"multiple_choice_question"},t.prototype.counts=function(){var e;return e=this.get("choices").countBy("type"),s.extend({},{all:0,none:0,simple:0,combo:0},e)},t.prototype.canAddCombo=function(){var e,t;return e=this.counts(),t=e.simple,t>=2&&e.combo<Math.pow(2,t)-(t+1)},t.prototype.canAddAll=function(){var e;return e=this.counts(),0===e.all&&e.simple>=2},t.prototype.canAddNone=function(){var e;return e=this.counts(),e.simple>1&&0===e.none},t.prototype.relations=[{type:o.Many,key:"choices",collectionType:n}],t}(o.AssociatedModel),t.exports=r},{"./../../../../../bower_components/backbone-associations/backbone-associations.js":"isMywK","./../../../../../bower_components/backbone/backbone.js":"KDJVm1","./../../../../../bower_components/jquery/dist/jquery.js":"d6Ad4U","./../../../../../bower_components/underscore/underscore.js":"l0hNr+","./choices.js.coffee":3}],8:[function(e,t){var o,n,r,s={}.hasOwnProperty,i=function(e,t){function o(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};o=e("./associated_collection.js.coffee"),n=e("./question.js.coffee"),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.model=n,t.prototype.resourceName=function(){return"questions"},t}(o),t.exports=r},{"./associated_collection.js.coffee":1,"./question.js.coffee":7}],9:[function(e){var t=e("./../../../../../bower_components/backbone-faux-server/backbone-faux-server.js"),o=e("./../../../../../bower_components/underscore/underscore.js"),n=n||{};n.stub=function(){function e(e,t,n){o.each(n,function(n){var r=o.result(e,n);r&&(t[n]=r)})}var t=this;return t.maxIds={exercise:1,part:0,question:0,choice:0},t.exercise={background:"",parts:[]},t.find=function(e,t){return t=parseInt(t),o.findWhere(e,{id:t})},t.findPart=function(e,o){return t.find(r.parts,o)},t.findQuestion=function(e,o,n){var r=t.findPart(e,o);return t.find(r.questions,n)},t.findChoice=function(e,o,n,r){var s=t.findQuestion(e,o,n);return t.find(s.choices,r)},t.update=function(e,o){return t.exercise.background=o.background,t.exercise},t.addPart=function(e,o){return t.maxIds.part+=1,o.id=t.maxIds.part,o.background="",o.position=t.exercise.parts.length,o.questions=[],t.exercise.parts.push(o),o},t.updatePart=function(o,n,r){var s=t.findPart(o,n);return e(r,s,["background","questions"]),s},t.removePart=function(e,o){var n=t.exercise.parts,r=t.findPart(e,o),s=n.indexOf(r);return s>=0&&n.splice(s,1),{success:!0}},t.addQuestion=function(e,o,n){var r=t.findPart(e,o),s=r.questions;return t.maxIds.question+=1,n.id=t.maxIds.question,n.position=s.length,n.stem="",n.choices=[],s.push(n),n},t.updateQuestion=function(o,n,r,s){var i=t.findPart(o,n),c=(i.questions,t.findQuestion(o,n,r));return e(s,c,["stem","choices"]),c},t.removeQuestion=function(e,o,n){var r=t.findPart(e,o),s=r.questions,i=t.findQuestion(e,o,n),c=s.indexOf(i);return c>=0&&s.splice(c,1),{success:!0}},t.updateChoices=function(e,n,r,s){var i=t.findPart(e,n),c=(i.questions,t.findQuestion(e,n,r)),a=c.choices;return s.order?(o.each(a,function(e){e.position=s.order[e.id]}),{success:!0}):{success:!1}},t.addChoice=function(e,o,n,r){var s=t.findPart(e,o),i=(s.questions,t.findQuestion(e,o,n)),c=i.choices;return t.maxIds.choice+=1,r.id=t.maxIds.choice,r.position=c.length,r.content="",r.combos=[],c.push(r),r},t.updateChoice=function(o,n,r,s,i){var c=t.findPart(o,n),a=(c.questions,t.findQuestion(o,n,r)),p=(a.choices,t.findChoice(o,n,r,s));return e(i,p,["position","content","combos"]),p},t.removeChoice=function(e,o,n,r){var s=t.findPart(e,o),i=(s.questions,t.findQuestion(e,o,n)),c=i.choices,a=t.findChoice(e,o,n,r),p=c.indexOf(a);return p>=0&&c.splice(p,1),{succes:!0}},{exercise:{parts:t.exercise.parts,update:t.update,addPart:t.addPart,updatePart:t.updatePart,removePart:t.removePart,addQuestion:t.addQuestion,updateQuestion:t.updateQuestion,removeQuestion:t.removeQuestion,addChoice:t.addChoice,updateChoice:t.updateChoice,updateChoices:t.updateChoices,removeChoice:t.removeChoice}}};var r=n.stub().exercise;t.put("/api/exercises/:exerciseId",function(e,t){return r.update(t,e.data)}).post("/api/exercises/:exerciseId/parts",function(e,t){return r.addPart(t,e.data)}).put("/api/exercises/:exerciseId/parts/:partId",function(e,t,o){return r.updatePart(t,o,e.data)}).del("/api/exercises/:exerciseId/parts/:partId",function(e,t,o){return r.removePart(t,o)}).post("/api/exercises/:exerciseId/parts/:partId/questions",function(e,t,o){return r.addQuestion(t,o,e.data)}).put("/api/exercises/:exerciseId/parts/:partId/questions/:questionId",function(e,t,o,n){return r.updateQuestion(t,o,n,e.data)}).del("/api/exercises/:exerciseId/parts/:partId/questions/:questionId",function(e,t,o,n){return r.removeQuestion(t,o,n)}).put("/api/exercises/:exerciseId/parts/:partId/questions/:questionId/choices",function(e,t,o,n){return r.updateChoices(t,o,n,e.data)}).post("/api/exercises/:exerciseId/parts/:partId/questions/:questionId/choices",function(e,t,o,n){return r.addChoice(t,o,n,e.data)}).put("/api/exercises/:exerciseId/parts/:partId/questions/:questionId/choices/:choiceId",function(e,t,o,n,s){return r.updateChoice(t,o,n,s,e.data)}).del("/api/exercises/:exerciseId/parts/:partId/questions/:questionId/choices/:choiceId",function(e,t,o,n,s){return r.removeChoice(t,o,n,s)}),t.enable()},{"./../../../../../bower_components/backbone-faux-server/backbone-faux-server.js":"i/emQT","./../../../../../bower_components/underscore/underscore.js":"l0hNr+"}],10:[function(e){var t,o,n,r;n=e("react"),t=e("./components/exercise"),o=e("../../../common/assets/js/entities/exercise.js.coffee"),e("../../../common/assets/js/stubs/api.js"),r=new o({id:1,parts:[]}),n.renderComponent(t({model:r}),document.getElementById("exercise-editor"))},{"../../../common/assets/js/entities/exercise.js.coffee":4,"../../../common/assets/js/stubs/api.js":9,"./components/exercise":16,react:"M6d2gk"}],11:[function(e,t){var o,n;n=e("react"),n.Addons=e("react-addons"),o=n.createClass({getDefaultProps:function(){return{hidden:!1,actionText:"",buttonMainClass:"action",buttonTypeClass:"secondary",extraButtonClasses:[]}},propTypes:{hidden:n.PropTypes.bool,onAction:n.PropTypes.func.isRequired,actionName:n.PropTypes.string.isRequired,actionText:n.PropTypes.string.isRequired,actionTitle:n.PropTypes.string},handleAction:function(){return this.props.onAction(this.props.actionName)},render:function(){var e,t,o,r,s;for(t={hidden:this.props.hidden},t[this.props.buttonMainClass]=!0,t[this.props.buttonTypeClass]=!0,s=this.props.extraButtonClasses,o=0,r=s.length;r>o;o++)e=s[o],t[e]=!0;return t=n.Addons.classSet(t),n.DOM.button({className:t,title:this.props.actionTitle,name:this.props.actionName,onClick:this.handleAction},this.props.actionText)}}),t.exports=o},{react:"M6d2gk","react-addons":"MzV8gO"}],12:[function(e,t){var o,n;n=e("react"),o=n.createClass({render:function(){return n.DOM.div({className:"action-panel drawer"},n.DOM.h4(null,this.props.title),this.props.children)}}),t.exports=o},{react:"M6d2gk"}],13:[function(e,t){var o,n,r,s,i,c,a,p,u,d,l,h=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};d=e("react"),d.addons=e("react-addons"),l=e("./../../../../../bower_components/underscore/underscore.js"),n=e("./action_button"),a=e("./content"),p=e("./action_drawer"),c=d.createClass({displayName:"ComboChoiceViewer",propTypes:{model:d.PropTypes.object.isRequired},getDefaultProps:function(){return{onEditComboChoice:function(){}}},handleEdit:function(){return this.props.onEditComboChoice()},render:function(){var e,t,o;return t=this.props.model.combos(),e=t.length>1?(o=l.map(l.initial(t),function(e){return"("+e.letter()+")"}).join(", "),o+=" & ",o+="("+l.last(t).letter()+")"):"Invalid selections. Please edit to fix.",d.DOM.div({className:"combo-choice-viewer viewer-container hoverable",onClick:this.handleEdit},d.DOM.button({className:"action secondary on-hover",title:"Edit combo choice",onClick:this.handleEdit},"Edit"),d.DOM.div({className:"viewer"},e))}}),i=d.createClass({displayName:"ComboChoiceEditor",propTypes:{model:d.PropTypes.object.isRequired},getInitialState:function(){return{selections:this.props.model.get("combos")}},getDefaultProps:function(){return{onCancelEdit:function(){},onSaveChanges:function(){}}},handleChange:function(){var e,t,o;return t=this.refs.editor.getDOMNode().getElementsByTagName("input"),o=function(){var o,n,r;for(r=[],o=0,n=t.length;n>o;o++)e=t[o],e.checked===!0&&r.push(parseInt(e.value));return r}(),this.setState({selections:o})},handleClick:function(e){return e.currentTarget.getElementsByTagName("input")[0].checked=!0,this.handleChange()},handleSave:function(){return this.props.model.setSelections(this.state.selections),this.props.model.save,this.props.onSaveChanges(),!1},handleCancel:function(){return this.props.onCancelEdit(),!1},render:function(){var e,t,o,n;return n=this.state.selections,o=function(e){return function(t){var o,r;return o="choice-selector-editor-"+t.get("id"),d.DOM.div({key:o,className:"choice-selector-container",onClick:e.handleClick},d.DOM.input({type:"checkbox",onChange:e.handleChange,value:t.get("id"),checked:(r=t.id,h.call(n,r)>=0)}),d.DOM.div({className:"choice-letter"},"(",t.letter(),")"),d.DOM.div({className:"choice-content",dangerouslySetInnerHTML:{__html:t.get("content")}}))}}(this),t=function(){var t,n,r,s;for(r=this.props.model.collection.simples(),s=[],t=0,n=r.length;n>t;t++)e=r[t],s.push(o(e));return s}.call(this),d.DOM.div({className:"combo-choice-editor editor",ref:"editor"},d.DOM.form({className:"combo-choice-editor-form form",onSubmit:this.handleSave},t,d.DOM.div({className:"footer button-panel"},d.DOM.button({className:"action secondary",title:"Cancel editing",onClick:this.handleCancel},"Cancel"),d.DOM.button({type:"submit",className:"action primary",title:"Done editing"},"Done"))))}}),s=d.createClass({displayName:"ComboChoice",propTypes:{model:d.PropTypes.object.isRequired},getInitialState:function(){var e,t;return e=this.props.model.get("combos"),t=null!=e&&e.length>1?"view":"edit",{mode:t}},onEdit:function(){return this.setState({mode:"edit"})},onCancelEdit:function(){return this.setState({mode:"view"})},render:function(){return"edit"===this.state.mode?i({model:this.props.model,onSaveChanges:this.onCancelEdit,onCancelEdit:this.onCancelEdit}):c({model:this.props.model,onEditComboChoice:this.onEdit})}}),o=d.createClass({displayName:"AllChoice",render:function(){return d.DOM.div({className:"quantifier-choice-container viewer"},d.DOM.span({className:"all-choice"}," All of the above "))}}),u=d.createClass({displayName:"NoneChoice",render:function(){return d.DOM.div({className:"quantifier-choice-container viewer"},d.DOM.span({className:"none-choice"}," None of the above "))}}),r=d.createClass({displayName:"Choice",propTypes:{model:d.PropTypes.object.isRequired},getStateFromModel:function(){return{content:this.props.model.get("content")}},getInitialState:function(){return this.getStateFromModel()},refreshState:function(){return this.setState(this.getStateFromModel())},componentDidMount:function(){return this.props.model.on("change",this.refreshState,this)},componentWillUnmount:function(){return this.props.model.off("change",this.refreshState,this)},onSaveContent:function(e){return this.props.model.set({content:e}),this.props.model.save()},onDeleteChoice:function(){return this.props.model.destroy({wait:!0})},onMoveChoiceUp:function(){return this.props.model.moveUp()},onMoveChoiceDown:function(){return this.props.model.moveDown()},render:function(){var e,t,r;return t=this.state.content,e="Choice ("+this.props.model.letter()+")",r=function(){switch(this.props.model.type()){case"simple":return a({prompt_add:"Click to add choice content.",prompt_edit:"Click to edit choice.",content:t,onSaveContent:this.onSaveContent});case"combo":return s({model:this.props.model});case"all":return o(null);case"none":return u(null);default:return console.log("Invalid choice type")}}.call(this),d.DOM.li({className:"choice-container has-drawer"},r,p({title:e},n({hidden:!this.props.model.canMoveUp(),actionTitle:"Move choice up",actionText:"Move up",actionName:"MoveUp",onAction:this.onMoveChoiceUp}),n({hidden:!this.props.model.canMoveDown(),actionTitle:"Move choice down",actionText:"Move down",actionName:"MoveDown",onAction:this.onMoveChoiceDown}),n({actionTitle:"Delete this choice",actionText:"Delete choice",actionName:"DeleteChoice",onAction:this.onDeleteChoice})))}}),t.exports=r},{"./../../../../../bower_components/underscore/underscore.js":"l0hNr+","./action_button":11,"./action_drawer":12,"./content":15,react:"M6d2gk","react-addons":"MzV8gO"}],14:[function(e,t){var o,n,r;r=e("react"),r.Addons=e("react-addons"),o=e("./choice"),n=r.createClass({displayName:"ChoiceList",propTypes:{collection:r.PropTypes.object.isRequired},render:function(){var e;return e=this.props.collection.map(function(e){return o({key:e.id,model:e})}),r.DOM.ol({className:"letters"},e)}}),t.exports=n},{"./choice":13,react:"M6d2gk","react-addons":"MzV8gO"}],15:[function(e,t){var o,n,r,s,i;s=e("react"),s.addons=e("react-addons"),r=e("quilljs"),i=s.createClass({displayName:"ContentViewer",propTypes:{content:s.PropTypes.string},getDefaultProps:function(){return{onEditContent:function(){}}},handleEdit:function(){return this.props.onEditContent()},render:function(){return null!=this.props.content&&""!==this.props.content?s.DOM.div({className:"viewer-container hoverable",onClick:this.handleEdit},s.DOM.button({className:"action secondary on-hover",title:this.props.prompt_edit,onClick:this.handleEdit},"Edit"),s.DOM.div({className:"viewer",dangerouslySetInnerHTML:{__html:this.props.content}})):s.DOM.div({className:"prompter-container",onClick:this.handleEdit},s.DOM.div({className:"empty-content"},s.DOM.span({className:"prompt-add-tip"},this.props.prompt_add)))}}),n=s.createClass({displayName:"ContentEditor",getInitialState:function(){return{objects:{editor:null}}},propTypes:{content:s.PropTypes.string},getDefaultProps:function(){return{onSaveContent:function(){},onCancelEdit:function(){},content:"",theme:"snow"}},focus:function(){return this.state.objects.editor.focus()},initializeEditor:function(){var e;return e=new r(this.refs.editor.getDOMNode(),{theme:this.props.theme}),e.addModule("toolbar",{container:this.refs.toolbar.getDOMNode()}),e.addModule("toolbar",{container:this.refs.footer.getDOMNode()}),e.setHTML(this.props.content),this.state.objects.editor=e},componentDidMount:function(){return this.initializeEditor()},componentDidUpdate:function(){return this.initializeEditor()},componentWillReceiveProps:function(e){return this.state.objects.editor.setHTML(e.content)},handleSave:function(){return this.props.onSaveContent(this.state.objects.editor.getHTML())},handleCancel:function(){return this.props.onCancelEdit(this.state.objects.editor.getHTML())},render:function(){return s.DOM.div({className:"editor-container"},s.DOM.div({className:"ql-box"},s.DOM.div({className:"ql-toolbar",ref:"toolbar"},s.DOM.span({className:"ql-format-group"},s.DOM.span({title:"Bold",className:"ql-format-button ql-bold"}),s.DOM.span({className:"ql-format-separator"}),s.DOM.span({title:"Italic",className:"ql-format-button ql-italic"}),s.DOM.span({className:"ql-format-separator"}),s.DOM.span({title:"Underline",className:"ql-format-button ql-underline"}),s.DOM.span({className:"ql-format-separator"}),s.DOM.span({title:"Strikethrough",className:"ql-format-button ql-strike"})),s.DOM.span({className:"ql-format-group"},s.DOM.span({title:"List",className:"ql-format-button ql-list"}),s.DOM.span({className:"ql-format-separator"}),s.DOM.span({title:"Bullet",className:"ql-format-button ql-bullet"}),s.DOM.span({className:"ql-format-separator"}),s.DOM.select({title:"Text Alignment",defaultValue:"left",className:"ql-align"},s.DOM.option({value:"left",label:"Left"}),s.DOM.option({value:"center",label:"Center"}),s.DOM.option({value:"right",label:"Right"}),s.DOM.option({value:"justify",label:"Justify"}))),s.DOM.span({className:"ql-format-group"},s.DOM.span({title:"Link",className:"ql-format-button ql-link"}))),s.DOM.div({className:"ql-editor",ref:"editor"}),s.DOM.div({className:"ql-footer",ref:"footer"},s.DOM.button({className:"action secondary",onClick:this.handleCancel},"Cancel"),s.DOM.button({className:"action primary",onClick:this.handleSave},"Save"))))}}),o=s.createClass({displayName:"ContentContainer",propTypes:{content:s.PropTypes.string},getInitialState:function(){return{mode:"view"}},onEditContent:function(){return this.setState({mode:"edit"}),this.refs.editor.focus()},onCancelEdit:function(){return this.setState({mode:"view"})},onSaveContent:function(e){return this.setState({mode:"view"}),this.props.onSaveContent(e)},render:function(){var e,t,o,r,c;return o=null!=this.props.content&&""!==this.props.content,e=s.addons.classSet({"content-container":!0,"mode-edit":"edit"===this.state.mode,"mode-view":"view"===this.state.mode&&o,"mode-prompt":"view"===this.state.mode&&!o}),t=function(e){return function(){return n({ref:"editor",content:e.props.content,onCancelEdit:e.onCancelEdit,onSaveContent:e.onSaveContent})}}(this),c=function(e){return function(){return i({content:e.props.content,prompt_add:e.props.prompt_add,prompt_edit:e.props.prompt_edit,onEditContent:e.onEditContent})}}(this),r="edit"===this.state.mode?t():c(),s.DOM.div({className:e},r)}}),t.exports=o},{quilljs:"aowo0O",react:"M6d2gk","react-addons":"MzV8gO"}],16:[function(e,t){var o,n,r,s,i,c;c=e("react"),c.Addons=e("react-addons"),o=e("./action_button"),n=e("./content"),r=e("./action_drawer"),i=e("./part_list"),s=c.createClass({displayName:"Exercise",propTypes:{model:c.PropTypes.object.isRequired},getStateFromModel:function(){return{content:this.props.model.get("background"),parts:this.props.model.get("parts")}},getInitialState:function(){return this.getStateFromModel()},refreshState:function(){return this.setState(this.getStateFromModel())},componentDidMount:function(){return this.props.model.on("change",this.refreshState,this),this.state.parts.on("add remove change",this.refreshState,this)},componentWillUnmount:function(){return this.props.model.off("change",this.refreshState,this),this.state.parts.off("add remove change",this.refreshState,this)},onSaveBackground:function(e){return this.props.model.set({background:e}),this.props.model.save()},onAddPart:function(){return this.state.parts.create({},{wait:!0})},render:function(){var e;return e=this.state.content,c.DOM.div({className:"exercise-container has-drawer"},n({prompt_add:"Click to add background information for the entire exercise.",prompt_edit:"Click to edit the background information for the entire exercise.",content:e,onSaveContent:this.onSaveBackground}),i({collection:this.state.parts}),r({title:"Exercise"},o({actionTitle:"Add a new part",actionText:"Add part",actionName:"AddPart",onAction:this.onAddPart})))}}),t.exports=s},{"./action_button":11,"./action_drawer":12,"./content":15,"./part_list":18,react:"M6d2gk","react-addons":"MzV8gO"}],17:[function(e,t){var o,n,r,s,i,c;c=e("react"),c.addons=e("react-addons"),o=e("./action_button"),n=e("./content"),r=e("./action_drawer"),i=e("./question_list"),s=c.createClass({displayName:"Part",propTypes:{model:c.PropTypes.object.isRequired},getStateFromModel:function(){return{content:this.props.model.get("background"),questions:this.props.model.get("questions")}},getInitialState:function(){return this.getStateFromModel()},refreshState:function(){return this.setState(this.getStateFromModel())},componentDidMount:function(){return this.props.model.on("change",this.refreshState,this),this.state.questions.on("add remove change",this.refreshState,this)},componentWillUnmount:function(){return this.props.model.off("change",this.refreshState,this),this.state.questions.off("add remove change",this.refreshState,this)},onSaveBackground:function(e){return this.props.model.set({background:e}),this.props.model.save()},onDeletePart:function(){return this.props.model.destroy({wait:!0})},onAddQuestion:function(){return this.state.questions.create({},{wait:!0})},render:function(){var e,t,s;return e=this.state.content,t=this.props.model.collection.indexOf(this.props.model)+1,s="Part "+t,c.DOM.li({className:"part-container has-drawer"},n({prompt_add:"Click to add background information for this part.",prompt_edit:"Click to edit the background information for this part.",content:e,onSaveContent:this.onSaveBackground}),i({collection:this.state.questions}),r({title:s},o({actionTitle:"Add a new question",actionText:"Add question",actionName:"AddQuestion",onAction:this.onAddQuestion}),o({actionTitle:"Delete this part",actionText:"Delete part",actionName:"DeletePart",onAction:this.onDeletePart})))}}),t.exports=s},{"./action_button":11,"./action_drawer":12,"./content":15,"./question_list":20,react:"M6d2gk","react-addons":"MzV8gO"}],18:[function(e,t){var o,n,r;r=e("react"),r.Addons=e("react-addons"),o=e("./part"),n=r.createClass({displayName:"PartList",propTypes:{collection:r.PropTypes.object.isRequired},render:function(){var e,t;return t=this.props.collection.map(function(e){return o({key:e.id,model:e})}),e=r.Addons.classSet({numbered:t.length>1}),r.DOM.ol({className:e},t)}}),t.exports=n},{"./part":17,react:"M6d2gk","react-addons":"MzV8gO"}],19:[function(e,t){var o,n,r,s,i,c;c=e("react"),c.addons=e("react-addons"),o=e("./action_button"),n=e("./choice_list"),r=e("./content"),s=e("./action_drawer"),i=c.createClass({displayName:"Question",propTypes:{model:c.PropTypes.object.isRequired},getStateFromModel:function(){return{content:this.props.model.get("stem"),choices:this.props.model.get("choices")}},getInitialState:function(){return this.getStateFromModel()},refreshState:function(){return this.setState(this.getStateFromModel())},componentDidMount:function(){return this.props.model.on("change",this.refreshState,this),this.state.choices.on("add remove change",this.refreshState,this)},componentWillUnmount:function(){return this.props.model.off("change",this.refreshState,this),this.state.choices.off("add remove change",this.refreshState,this)},onSaveStem:function(e){return this.props.model.set({stem:e}),this.props.model.save()},onDeleteQuestion:function(){return this.props.model.destroy({wait:!0})
},onAddChoice:function(e){return this.state.choices.create({type:e},{wait:!0})},render:function(){var e,t,i;return e=this.state.content,t=this.props.model.collection.indexOf(this.props.model)+1,i="Question "+t,c.DOM.div({className:"question-container has-drawer"},r({prompt_add:"Click to add the question stem.",prompt_edit:"Click to edit the question stem.",content:e,onSaveContent:this.onSaveStem}),n({collection:this.state.choices}),s({title:i},o({hidden:!1,actionTitle:"Add a new choice",actionText:"Add choice",actionName:"simple",onAction:this.onAddChoice}),o({hidden:!this.props.model.canAddCombo(),actionTitle:"Add a new combo choice",actionText:"Add '(a) & (b)' choice",actionName:"combo",onAction:this.onAddChoice}),o({hidden:!this.props.model.canAddAll(),actionTitle:"Add a new choice",actionText:"Add 'All of the above' choice",actionName:"all",onAction:this.onAddChoice}),o({hidden:!this.props.model.canAddNone(),actionTitle:"Add a new choice",actionText:"Add 'None of the above' choice",actionName:"none",onAction:this.onAddChoice}),o({actionTitle:"Delete this question",actionText:"Delete question",actionName:"DeleteQuestion",onAction:this.onDeleteQuestion})))}}),t.exports=i},{"./action_button":11,"./action_drawer":12,"./choice_list":14,"./content":15,react:"M6d2gk","react-addons":"MzV8gO"}],20:[function(e,t){var o,n,r;r=e("react"),r.Addons=e("react-addons"),o=e("./question"),n=r.createClass({displayName:"QuestionList",propTypes:{collection:r.PropTypes.object.isRequired},render:function(){var e;return e=this.props.collection.map(function(e){return o({key:e.id,model:e})}),r.DOM.ol(null,e)}}),t.exports=n},{"./question":19,react:"M6d2gk","react-addons":"MzV8gO"}]},{},[10]);